# Changelog
All notable changes to this project will be documented in this file.
The format is based on [Keep a Changelog](http://keepachangelog.com/en/1.0.0/).
Changelog started with version 1.2.0

## [Unreleased]
### Added
- [CMD] Workflows can be resumed now; only tasks that were not executed successfully or have changed parameters will be executed
- [XSD] Modules can now be documented (including basic module information, description and parameters) using a simple XML format
- [CMD] New parameter -tmpFolder, which can be used to set a custom temporary caching and working directory
- [JAR] Added docuTemplateExtractor.jar that can be used to create templates for module documentation
- [CMD] Implemented documentation template extractor plugins for bash and python modules
- [PLUGIN] Implemented binary-based executor (<sge>) to support Sun Grid Engine (tested with v6.1); SGE control binaries must be accessible via the $PATH variable TODO: add to DOCU
- [DOCU] PDF version of the documentation is provided in addition to the HTML version
- [GUI] Added -tmpFolder folder parameter to Workflow designer
- [PLUGIN]

### Changed
- [PLUGIN] Executor <cluster> is now used for DRMAA cluster implementations; custom attributes (memory, slots, queue) were removed  TODO: add to DOCU
- [] Watchdog releases require now Java 11 (and JavaFX SDK for workflow designer)
 
### Fixed
- [] Fixed small memory leak caused by not closed ScanResult objects
- [CMD] Removed unnecessary nesting of pre-defined TMP constant  
- [GUI] In some cases not all task parameters were loaded from a XML file
- [EXAMPLE] Fixed wrong dependency in example workflow 1 for task 5
- [BASH] Corrected wrong array access that caused an error in new bash versions
- [BASH] Last parameter of called command was not shown 
- [PLUGIN] Slurm executor plugin was not using the <cluster> tag

## [1.2.7] - 2018-08-30
### Added
- [] New task action links, part of the summary mail, can control multiple failed subtasks at once
- [XSD] Added concept of module versions that allows the use of different XSD definition versions (of the same module without copy&paste)
- [DOCU] Added documentation on module versions (5.6)
- [MOD] Added versiodn 2 of the featureCount module which supports a newer featureCount release
- [MOD] New parameter 'shortenReads' for cutadapt module that shortens reads to a maximal length after trimming

### Fixed
- [] Constant replacement of ${TMP} failed when used more than once per line 
- [] Wrong behavior when attribute 'disableExistenceCheck' attribute was set on process table
- [] Variables were not correctly replaced when a space separated the number of suffixes and the separator
- [] Wrong behavior when a process table file was empty or did not contain the requested column
- [CMD] Prevent sending of mails when workflow execution is ended with STRG+C
- [GUI] Instant change of module library without restart when settings are updated

### Internal
- [PLUGIN] replaced outdated FastClasspathScanner class with its new version named ClassGraph (closed #1)

## [1.2.6] - 2018-01-22
### Added
- [] Added attribute 'pattern' to restrict <copyFolder>/<deleteFolder> actions to files that match that pattern
- [] Added attribute 'keep4Slave' to <depends> in order to make the slave wait with task execution until all sub-tasks with that ID are finished on it
- [CMD] Added flag -useEnvBase that overrides the watchdogBase attribute with the content of the WATCHDOG_HOME environment variable
- [DOCU] Added documentation on how Docker can be used to run Watchdog and how a Docker image can be used within modules
- [MOD] Added Docker example module and an example workflow that use a bowtie2 Docker image

### Fixed
- [GUI] Attribute 'deleteSource' of <copyFile>/<deleteFolder> was loaded incorrectly
- [XSD] Pattern for URI's of task actions was to strict when process block variables should be used in it
- [XSD] Constants are now allowed to contain numbers

## [1.2.5] - 2017-12-08
### Added
- [PLUGIN] Implemented plugin system for XML parsing that allows to extend functionally of Watchdog by community
- [PLUGIN] Applied concept of plugin system to process blocks and executors
- [VFS] Modified task actions to support all virtual file systems that implement the FileProvider interface of the commons vfs project (http://commons.apache.org/proper/commons-vfs/)
- [VFS] Added default support for URI schemes: file, http, https, ftp, ftps, sftp and ram
- [VFS] Implemented interface VFSRegister that can be used to add additional virtual file systems easily
- [] Implemented additional executor to support Slurm Workload Manager (https://slurm.schedmd.com/)
- [GUI] Saving (and loading) of incomplete workflows, not valid according to the XSD format, is supported experimentally
- [XML] Added attribute 'saveResourceUsage' to <stream> that saves used resources to <STDOUT_FILE>.res
- [XSD] Added attribute 'separateFormat' to abstract task that can be used to set the default separator string between multiple occurrences of the same parameter
- [CMD] Added flag -forceLoading  (tries to load a workflow even if it is not valid according to the XSD format)
- [CMD] Added flag -disableCheckpoint (ignores all checkpoints that are defined in the workflow)
- [CMD] Added flag -disableMails (does not send mails even if a mail address is set in the workflow)
- [] Added Watchdog to the package manager bioconda; package name: watchdog-wms (https://bioconda.github.io/)
- [] Sources of watchdog are now hosted on github (https://github.com/klugem/watchdog)

### Fixed
- [GUI] workflow designer crashed on windows caused by not escaped backslash in regex
- [CMD] command line version of watchdog crashed when openjdk8 with missing javafx was used
- [] remote executor: not reachable hosts are removed from host list

## [1.1.0] - 2017-08-24
### Added
- [GUI] Implemented workflow designer
